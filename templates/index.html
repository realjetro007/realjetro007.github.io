<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ASCII Art Generator</title>
    <style>
        body {
            font-family: monospace;
            white-space: pre;
        }
    </style>
</head>
<body>
    <form id="asciiForm" enctype="multipart/form-data">
        <input type="file" name="image" id="imageInput" required>
        <input type="number" name="width" id="widthInput" value="100">
        <input type="checkbox" name="invert" value="1"> Invert colors
        <input type="checkbox" name="dither" value="1"> Dithering

        <label>Brightness:</label>
        <input type="range" id="brightnessSlider" name="brightness" min="0.1" max="2" value="1" step="0.1">

        <label>Contrast:</label>
        <input type="range" id="contrastSlider" name="contrast" min="0.1" max="2" value="1" step="0.1">

        <label>Aspect Ratio Multiplier:</label>
        <input type="range" id="multiplier" name="multiplier" min="0.01" max="1" value="0.55" step="0.01">
    </form>



    <pre id="asciiOutput"></pre>

<!-- This script refreshes the image every time a change is made to make it realtime. -->
    <script>
        const form = document.getElementById("asciiForm");
        const output = document.getElementById("asciiOutput");

        function updateASCII() {
            const data = new FormData(form);
            fetch("/", { method: "POST", body: data })
                .then(res => res.text())
                .then(ascii => {
                    output.textContent = ascii;
                });
        }

        // Update on any change
        form.addEventListener("change", updateASCII);

        let debounceTimer;
        form.addEventListener("input", () => {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(updateASCII, 200); // waits 200ms after last change
        });
    </script>
</body>
</html>
